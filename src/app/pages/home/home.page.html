<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>Movie-Match</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="home-hero ion-padding">
    <h1>Bienvenue sur Movie-Match !</h1>
    <p>Découvrez des films recommandés rien que pour vous.</p>
  </div>

  <div *ngIf="isLoading" class="loading-wrap ion-padding">
    <ion-spinner name="crescent"></ion-spinner>
  </div>

  <div *ngIf="!isLoading" class="movies-list ion-padding">
  <ng-container *ngFor="let movie of movies; trackBy: trackById">
      <ion-card class="movie-card" [routerLink]="['/tabs/movie', movie.id]">
        <div class="card-body">
          <!-- Poster -->
          <div class="poster-wrap">
            <img [src]="posterUrl(movie.poster_path)" [alt]="movie.title" />
          </div>

          <!-- Titre sous le poster -->
          <div class="movie-info">
            <h3 class="movie-title">{{ movie.title }}</h3>
          </div>

          <!-- Bouton cœur en bas à droite du poster (overlay) -->
          <ion-button
            class="fav-btn"
            fill="clear"
            size="small"
            (click)="toggleFavorite(movie); $event.stopPropagation(); $event.preventDefault();"
            [aria-label]="isFavorite(movie) ? 'Retirer des favoris' : 'Ajouter aux favoris'"
          >
            <ion-icon
              [name]="isFavorite(movie) ? 'heart' : 'heart-outline'"
              [color]="isFavorite(movie) ? 'danger' : 'danger'"
              style="font-size: 24px;"
            ></ion-icon>
          </ion-button>
        </div>
      </ion-card>
    </ng-container>
  </div>
</ion-content>